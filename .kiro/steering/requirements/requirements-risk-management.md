# 风险与假设管理

**文档版本**: v1.0.0  
**创建日期**: 2025-01-21  
**适用阶段**: 需求分析阶段及整个项目生命周期

---

## 📋 概述

风险和假设的管理直接影响需求的可实现性和项目成功率。通过系统化地识别、评估和管理风险与假设，可以提前规避问题，降低项目失败的概率。

**关键原则**:
- 主动识别风险，而非被动应对
- 明确记录所有假设条件
- 验证关键假设的有效性
- 为高风险制定缓解方案

---

## 🎯 为什么需要风险与假设管理

### 风险管理的重要性

**未管理的风险会导致**:
- 需求无法实现
- 项目延期或超预算
- 技术债务累积
- 用户体验不佳

**案例**:
```
风险: 第三方支付 API 性能不稳定
未管理: 开发完成后才发现 API 响应时间超过 5 秒，无法满足需求
已管理: 需求阶段进行技术预研，发现问题后调整需求或选择备用方案
```

### 假设管理的重要性

**未验证的假设会导致**:
- 需求基于错误的前提
- 实施时发现假设不成立，需要大幅返工
- 用户期望与实际能力不匹配

**案例**:
```
假设: 用户具备基本的互联网使用能力
未验证: 开发了复杂的交互界面，上线后发现目标用户群体不会使用
已验证: 需求阶段进行用户调研，发现需要简化界面并提供详细引导
```

---

## 🔍 技术风险识别

### 风险识别方法

#### 1. 头脑风暴法

**参与者**: 需求分析师、架构师、技术负责人、有经验的开发人员

**流程**:
1. 列出所有需求
2. 对每个需求提问："实现这个需求可能遇到什么问题？"
3. 记录所有提到的风险，不做评判
4. 分类和合并相似的风险

#### 2. 检查清单法

使用以下检查清单系统化地识别风险：

**技术风险检查清单**:

**性能风险**:
- [ ] 是否有高并发场景？预期并发量是多少？
- [ ] 是否有大数据量处理？数据规模是多少？
- [ ] 是否有复杂计算或查询？响应时间要求是多少？
- [ ] 是否依赖第三方服务？其性能是否满足要求？

**安全风险**:
- [ ] 是否处理敏感数据（个人信息、支付信息）？
- [ ] 是否有认证和授权需求？
- [ ] 是否需要防范特定攻击（XSS、SQL注入、CSRF）？
- [ ] 是否需要合规认证（GDPR、PCI-DSS）？

**技术可行性风险**:
- [ ] 团队是否熟悉所需技术栈？
- [ ] 是否需要使用新技术或框架？
- [ ] 是否有技术限制（浏览器兼容性、设备限制）？
- [ ] 是否依赖未成熟的技术？

**集成风险**:
- [ ] 是否需要集成第三方系统？
- [ ] 第三方系统的稳定性如何？
- [ ] 是否有 API 限制（调用频率、数据量）？
- [ ] 是否有数据格式兼容性问题？

**可维护性风险**:
- [ ] 系统复杂度是否过高？
- [ ] 是否有足够的文档和注释？
- [ ] 是否有监控和告警机制？
- [ ] 是否容易排查问题？

#### 3. 历史经验法

**参考历史项目**:
- 回顾类似项目遇到的问题
- 分析失败案例的根本原因
- 总结经验教训

---

## 📊 风险评估和分类

### 风险评估矩阵

使用概率和影响两个维度评估风险：

**概率等级**:
- **高**: > 50% 的可能性发生
- **中**: 20-50% 的可能性发生
- **低**: < 20% 的可能性发生

**影响等级**:
- **高**: 导致项目失败或严重延期（> 2 周）
- **中**: 导致部分功能无法实现或中等延期（1-2 周）
- **低**: 影响较小，可以快速解决（< 1 周）

**风险等级矩阵**:

|  | 低影响 | 中影响 | 高影响 |
|---|--------|--------|--------|
| **高概率** | 🟡 中风险 | 🔴 高风险 | 🔴 高风险 |
| **中概率** | 🟢 低风险 | 🟡 中风险 | 🔴 高风险 |
| **低概率** | 🟢 低风险 | 🟢 低风险 | 🟡 中风险 |

---

## 📝 风险记录模板

### 风险登记表

使用以下模板记录识别的风险：

```markdown
## 技术风险登记表

| 风险ID | 风险描述 | 概率 | 影响 | 风险等级 | 应对策略 | 负责人 | 状态 |
|-------|---------|-----|------|---------|---------|--------|------|
| RISK-001 | 第三方API性能不稳定 | 中 | 高 | 🔴 高 | 使用缓存和降级方案 | 张三 | 进行中 |
| RISK-002 | 数据库查询性能瓶颈 | 高 | 中 | 🔴 高 | 建立索引，使用分页 | 李四 | 已缓解 |
| RISK-003 | 浏览器兼容性问题 | 低 | 低 | 🟢 低 | 跨浏览器测试 | 王五 | 已接受 |
| RISK-004 | 新技术学习曲线 | 中 | 中 | 🟡 中 | 技术培训和预研 | 赵六 | 计划中 |
```

### 详细风险描述模板

对于高风险和中风险，使用详细模板记录：

```markdown
## 风险详情：RISK-001

**风险ID**: RISK-001  
**风险名称**: 第三方支付 API 性能不稳定  
**识别日期**: 2025-01-21  
**识别人**: 张三  

---

### 风险描述
第三方支付 API 的响应时间不稳定，在高峰期可能超过 5 秒，
无法满足需求中"支付请求在 2 秒内响应"的要求。

### 风险触发条件
- 用户并发支付请求 > 100 次/秒
- 第三方服务高峰期（如促销活动）
- 网络延迟增加

### 影响分析
**功能影响**:
- REQ-FR-015: 支付功能无法满足性能要求
- REQ-NFR-PERF-003: 支付响应时间 SLA 无法达标

**业务影响**:
- 用户体验差，可能导致订单流失
- 高峰期支付成功率下降

**技术影响**:
- 需要实现复杂的超时和重试机制
- 可能需要引入消息队列异步处理

### 概率评估
**概率**: 中（30-40%）

**依据**:
- 第三方服务 SLA 承诺 99.5% 可用性
- 历史数据显示高峰期响应时间波动较大
- 无法控制第三方服务的性能

### 影响评估
**影响**: 高

**依据**:
- 支付是核心功能，性能问题直接影响业务
- 修复需要重新设计支付流程，工作量大（> 40 小时）

### 风险等级
🔴 **高风险**（中概率 + 高影响）

---

### 应对策略

**策略类型**: 缓解（Mitigation）

**具体措施**:

1. **技术预研**（立即执行）
   - 测试第三方 API 在不同负载下的性能
   - 收集 1 周的性能数据
   - 负责人：张三
   - 完成时间：2025-01-28

2. **实施缓存机制**（如果预研确认风险）
   - 对支付状态查询结果缓存 30 秒
   - 减少对第三方 API 的调用频率
   - 负责人：李四
   - 完成时间：Sprint 2

3. **异步处理**（备用方案）
   - 支付请求放入消息队列异步处理
   - 用户界面显示"支付处理中"，通过轮询或推送获取结果
   - 负责人：王五
   - 完成时间：Sprint 3

4. **降级方案**（最坏情况）
   - 调整需求，将响应时间要求放宽到 5 秒
   - 在高峰期显示"支付繁忙，请稍后重试"
   - 需要与产品负责人确认

**预算**:
- 技术预研：8 小时
- 缓存机制：16 小时
- 异步处理：40 小时（如需要）

**成功标准**:
- 95% 的支付请求在 2 秒内响应
- 高峰期支付成功率 > 98%

---

### 监控和跟踪

**监控指标**:
- 第三方 API 响应时间（P50、P95、P99）
- 支付成功率
- 超时和重试次数

**跟踪频率**: 每周评审

**状态更新**:
- 2025-01-21: 风险识别，状态：新建
- 2025-01-28: 技术预研完成，确认风险存在，状态：进行中
- 2025-02-10: 缓存机制实施完成，风险降低，状态：已缓解
```

---

## 🎯 风险应对策略

### 四种应对策略

#### 1. 规避（Avoid）

**定义**: 改变计划，消除风险或保护项目目标不受影响。

**适用场景**: 高风险且有替代方案

**示例**:
```
风险: 新技术框架不成熟，可能存在严重 Bug
应对: 使用成熟稳定的技术框架替代
```

#### 2. 缓解（Mitigate）

**定义**: 采取措施降低风险发生的概率或影响。

**适用场景**: 无法完全规避但可以降低的风险

**示例**:
```
风险: 数据库查询性能可能不足
应对: 
- 建立合适的索引
- 使用查询优化
- 实施缓存机制
- 进行性能测试
```

#### 3. 转移（Transfer）

**定义**: 将风险的影响转移给第三方。

**适用场景**: 专业性强的风险

**示例**:
```
风险: 支付安全风险
应对: 使用第三方支付平台（如 Stripe、支付宝），由其承担支付安全责任
```

#### 4. 接受（Accept）

**定义**: 承认风险存在，但不采取主动措施。

**适用场景**: 低风险或应对成本过高

**示例**:
```
风险: 极少数用户使用旧版浏览器可能显示异常
应对: 接受风险，在用户协议中说明支持的浏览器版本
```

---

## 📋 假设条件管理

### 什么是假设条件

**假设条件**是项目成功所依赖的、尚未验证或无法完全控制的前提条件。

**示例**:
- 假设用户具备基本的互联网使用能力
- 假设第三方服务可用性 >= 99.5%
- 假设用户设备支持 JavaScript
- 假设数据迁移可以在 1 天内完成

### 假设条件记录模板

```markdown
## 假设条件登记表

| 假设ID | 假设描述 | 验证状态 | 验证方法 | 如果假设不成立的影响 | 应对措施 |
|-------|---------|---------|---------|-------------------|---------|
| ASSUM-001 | 用户具备基本的互联网使用能力 | 已验证 | 用户调研 | 需要简化界面并提供详细引导 | 已调整需求 |
| ASSUM-002 | 第三方支付接口可用性 >= 99.5% | 已验证 | 查阅 SLA | 需要考虑支付失败的备用方案 | 已实施降级方案 |
| ASSUM-003 | 用户设备支持 JavaScript | 已验证 | 统计数据 | 需要提供无 JS 的降级方案 | 已接受风险 |
| ASSUM-004 | 数据迁移可以在 1 天内完成 | 待验证 | 技术预研 | 项目延期 | 计划验证 |
```

### 详细假设描述模板

```markdown
## 假设详情：ASSUM-001

**假设ID**: ASSUM-001  
**假设描述**: 用户具备基本的互联网使用能力  
**提出日期**: 2025-01-20  
**提出人**: 产品经理  

---

### 假设内容
目标用户群体具备基本的互联网使用能力，包括：
- 能够使用浏览器访问网站
- 能够填写表单和点击按钮
- 理解常见的网页交互模式（如下拉菜单、标签页）

### 假设的重要性
**影响的需求**:
- REQ-FR-001 ~ REQ-FR-020: 所有用户交互相关需求
- REQ-NFR-UX-001: 用户体验需求

**如果假设不成立**:
- 需要大幅简化界面
- 需要提供详细的操作引导和帮助文档
- 可能需要增加客服支持成本
- 预计增加 40-60 小时的开发工作量

### 验证方法
**方法**: 用户调研

**步骤**:
1. 选取 20 名目标用户进行访谈
2. 观察用户使用类似产品的行为
3. 评估用户的互联网使用熟练程度
4. 统计分析结果

**负责人**: 用户研究员  
**完成时间**: 2025-01-25

### 验证结果
**验证日期**: 2025-01-25  
**验证状态**: ✅ 已验证

**结果**:
- 85% 的用户具备基本的互联网使用能力
- 15% 的用户需要额外的引导

**结论**: 假设基本成立，但需要为 15% 的用户提供额外支持

**调整措施**:
- 在关键操作处增加工具提示
- 提供"新手引导"功能
- 增加帮助文档链接
```

---

## 🔄 假设验证方法

### 1. 技术预研（POC）

**适用场景**: 技术可行性假设

**方法**:
- 构建概念验证原型
- 测试关键技术点
- 评估性能和可行性

**示例**:
```
假设: 使用 WebSocket 可以实现实时通知，延迟 < 1 秒
验证: 构建 POC，测试 1000 个并发连接的延迟
```

### 2. 用户调研

**适用场景**: 用户行为和能力假设

**方法**:
- 问卷调查
- 用户访谈
- 可用性测试

**示例**:
```
假设: 用户愿意使用手机号注册
验证: 调研 100 名目标用户，询问注册偏好
```

### 3. 数据分析

**适用场景**: 基于数据的假设

**方法**:
- 分析历史数据
- 查看行业报告
- 参考竞品数据

**示例**:
```
假设: 移动端用户占比 > 60%
验证: 分析现有网站的访问数据
```

### 4. 查阅文档

**适用场景**: 第三方服务或技术规范假设

**方法**:
- 查阅官方文档
- 查看 SLA 协议
- 咨询技术支持

**示例**:
```
假设: 第三方 API 支持每秒 1000 次调用
验证: 查阅 API 文档和服务等级协议
```

---

## 🔗 依赖项管理

### 依赖项类型

#### 1. 外部依赖

**定义**: 项目依赖的外部系统、服务或资源

**示例**:
- 第三方服务和 API（支付、地图、短信）
- 开源库和框架
- 云服务提供商（AWS、阿里云）
- 外部团队交付的模块

**依赖项记录**:

```markdown
## 外部依赖登记表

| 依赖ID | 依赖名称 | 依赖类型 | 提供方 | SLA | 风险等级 | 备用方案 |
|-------|---------|---------|--------|-----|---------|---------|
| DEP-001 | 支付 API | 第三方服务 | Stripe | 99.9% | 🔴 高 | 支付宝备用 |
| DEP-002 | React 框架 | 开源库 | Facebook | N/A | 🟢 低 | 无 |
| DEP-003 | AWS S3 | 云服务 | AWS | 99.99% | 🟡 中 | 阿里云 OSS |
```

#### 2. 内部依赖

**定义**: 项目依赖的内部系统或团队

**示例**:
- 已有的内部系统
- 共享的基础设施
- 其他项目的交付物
- 其他团队的支持

**依赖项记录**:

```markdown
## 内部依赖登记表

| 依赖ID | 依赖名称 | 依赖团队 | 交付时间 | 状态 | 风险 |
|-------|---------|---------|---------|------|-----|
| DEP-101 | 用户认证模块 | 平台团队 | 2025-02-01 | 进行中 | 🟡 中 |
| DEP-102 | 数据库集群 | 基础设施团队 | 2025-01-25 | 已完成 | 🟢 低 |
| DEP-103 | 设计规范 | 设计团队 | 2025-01-30 | 延期 | 🔴 高 |
```

### 依赖风险缓解

**对关键依赖的应对措施**:

1. **建立备用方案**
   - 对高风险依赖准备替代方案
   - 评估切换成本

2. **提前确认交付时间**
   - 与依赖方确认交付计划
   - 建立定期沟通机制

3. **定期检查可用性**
   - 监控第三方服务的可用性
   - 设置告警机制

4. **合同和 SLA 管理**
   - 明确服务等级协议
   - 了解赔偿条款

---

## 📊 风险和假设的持续管理

### 定期评审

**评审频率**:
- 需求阶段：每周评审
- 设计和开发阶段：每 Sprint 评审
- 测试和上线阶段：每日评审（高风险项目）

**评审内容**:
- 新识别的风险和假设
- 现有风险的状态更新
- 应对措施的执行情况
- 风险等级的变化

### 状态跟踪

**风险状态**:
- 🆕 新建：刚识别的风险
- 🔄 进行中：正在实施应对措施
- ✅ 已缓解：风险已降低到可接受水平
- ⚠️ 已发生：风险已转化为问题
- ✔️ 已关闭：风险不再存在

**假设状态**:
- 🔍 待验证：尚未验证
- 🔄 验证中：正在验证
- ✅ 已验证：验证通过
- ❌ 验证失败：假设不成立，需要调整
- ✔️ 已关闭：不再相关

---

## 📋 风险和假设管理检查清单

### 需求阶段
- [ ] 已识别所有技术风险
- [ ] 已评估风险的概率和影响
- [ ] 已为高风险制定应对策略
- [ ] 已记录所有假设条件
- [ ] 已验证关键假设
- [ ] 已识别所有依赖项
- [ ] 已评估依赖项的风险

### 设计阶段
- [ ] 已更新风险登记表
- [ ] 已验证技术可行性假设
- [ ] 已确认依赖项的交付时间
- [ ] 已实施风险缓解措施

### 开发阶段
- [ ] 已监控风险指标
- [ ] 已跟踪风险状态
- [ ] 已处理已发生的风险
- [ ] 已更新依赖项状态

---

## 🔗 相关文档

- [需求分析工作流程](../requirements-workflow.md)
- [阶段 1: 需求理解和澄清](phase1-understanding.md)
- [阶段 2: 需求文档编写](phase2-writing.md)
- [阶段 3: 需求验证](phase3-verification.md)
- [需求变更管理](requirements-change-management.md)

---

**记住**: 风险管理不是一次性的活动，而是贯穿整个项目生命周期的持续过程。主动识别和管理风险，可以显著提高项目成功率。
